<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Tajniak</title>
<style>
body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
input[type="number"], select { width: 90%; font-size: 16px; padding: 5px; }
button { font-size: 18px; padding: 10px 25px; margin-top: 15px; cursor: pointer; }
#haslo { font-size: 28px; margin-top: 20px; }
.kategorie { margin-top: 40px; }
.kategorie label { display: inline-block; margin: 8px; }
.kategorie input { display: none; }
.kategorie span {
    display: inline-block;
    padding: 12px 20px;
    border-radius: 8px;
    background-color: #b6f0b6;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
}
.kategorie span:hover { background-color: #8fdd8f; }
.kategorie input:checked + span { background-color: #4caf50; color: white; }
</style>
</head>
<body>

<h2>Tajniak</h2>

<div id="start">
    <p>Ilo≈õƒá graczy:</p>
    <input type="number" id="gracze" value="5" min="3">

    <p>Tryb impostor√≥w:</p>
    <select id="trybImpostora">
        <option value="1">1 impostor</option>
        <option value="2">2 impostor√≥w</option>
        <option value="losowo" selected>Losowo</option>
    </select>

    <br>
    <button onclick="start()">Graj</button>

    <div class="kategorie" id="kategorieBox"></div>
</div>

<div id="gra" style="display:none;">
    <h3 id="info"></h3>
    <button onclick="pokaz()">Poka≈º has≈Ço</button>
    <div id="haslo"></div>
    <br>
    <button onclick="dalej()" style="display:none;">Podaj telefon dalej!</button>
</div>

<script>
let liczbaGraczy, aktualny = 0, impostorzy = [], slowo, chaos = false;

/* ===== KATEGORIE I HAS≈ÅA ===== */
let kategorie = {
    mikolow: [
        "rynek","trƒÖbka","dworzec","silver","fresh",
        "szko≈Ça 1","szko≈Ça 3",
        "plac 750 lecia","altana klonowa","orlik 10","niva"
    ],

    marki: [
        "apple","ferrari","orbit","Axe","dyson","zelmer",
        "level up","simens","bmw","tymbark",
        "perwol","pampers","sony","tesla","cat","sprite",
        "ibuprom","wo≈Çga","star","legia warszawa",
        "real madryt","orange","T mobil","tauron","panasonic",

        "nike","adidas","coca cola","pepsi","lego",
        "samsung","hp","intel","loreal","red bull"
    ],

    miejsca: [
        "dzia≈Çka","bielsko","istebna","passat",
        "dom antka","ka≈õka/pole","mcdonald's","lodowisko"
    ],

    swieta: [
        "nit mi w tym domu nie pomaga!!!","piernik","pieniadze",
        "miko≈Çaj","rƒôka jak m≈Çotek","≈õnieg?",
        "mandarynki","jarmark","kolendy",
        "uszka","kevin sam w domu","ekspres polarny",
        "op≈Çatek","sianko"
    ],

    filmy: [
        "Titanic","Matrix","Star Wars","Avatar","Hitman",
        "Szybcy i W≈õciekli","Furioza","Breaking Bad",

        "Incepcja","Interstellar","Joker",
        "Dark","Narcos","The Witcher","Gra o Tron"
    ]
};

/* ===== PODPOWIEDZI DLA MARKI ===== */
const podpowiedziMarki = {
    apple: "bia≈Çy",
    ferrari: "czerwony",
    orbit: "≈õwie≈ºo",
    Axe: "zapach",
    dyson: "powietrze",
    zelmer: "kuchnia",
    "level up": "gracze",
    simens: "technika",
    bmw: "szybko",
    tymbark: "owocowo",
    perwol: "czysto",
    pampers: "miƒôkko",
    sony: "ekran",
    tesla: "prƒÖd",
    cat: "≈º√≥≈Çte",
    sprite: "bƒÖbelki",
    ibuprom: "b√≥l",
    wo≈Çga: "stare",
    star: "ciƒô≈ºkie",
    "legia warszawa": "zielone",
    "real madryt": "bia≈Çe",
    orange: "kolor",
    "T mobil": "r√≥≈ºowe",
    tauron: "energia",
    panasonic: "sprzƒôt",

    nike: "znak",
    adidas: "paski",
    "coca cola": "czarne",
    pepsi: "niebieskie",
    lego: "klocki",
    samsung: "ekran",
    hp: "biuro",
    intel: "wnƒôtrze",
    loreal: "w≈Çosy",
    "red bull": "skrzyd≈Ça"
};

/* ===== RENDER KATEGORII ===== */
function renderKategorie() {
    const box = document.getElementById("kategorieBox");
    box.innerHTML = "<p><strong>Wybierz kategorie:</strong></p>";
    Object.keys(kategorie).forEach(kat => {
        box.innerHTML += `
            <label>
                <input type="checkbox" class="kat" value="${kat}" checked>
                <span>${kat}</span>
            </label>
        `;
    });
}
renderKategorie();

/* ===== GRA ===== */
function start() {
    liczbaGraczy = parseInt(document.getElementById("gracze").value);
    const tryb = document.getElementById("trybImpostora").value;
    const zaznaczone = [...document.querySelectorAll(".kat:checked")].map(e => e.value);

    let lista = [];
    zaznaczone.forEach(k => lista = lista.concat(kategorie[k]));
    slowo = lista[Math.floor(Math.random() * lista.length)];

    impostorzy = [];
    let ilosc = tryb === "losowo" ? (Math.random() < 0.5 ? 1 : 2) : parseInt(tryb);
    while (impostorzy.length < ilosc) {
        const i = Math.floor(Math.random() * liczbaGraczy);
        if (!impostorzy.includes(i)) impostorzy.push(i);
    }

    aktualny = 0;
    document.getElementById("start").style.display = "none";
    document.getElementById("gra").style.display = "block";
    pokazInfo();
}

function pokazInfo() {
    document.getElementById("info").innerText = "Gracz " + (aktualny + 1);
    document.getElementById("haslo").innerText = "";
    document.querySelector("button[onclick='dalej()']").style.display = "none";
}

function pokaz() {
    if (impostorzy.includes(aktualny)) {
        document.getElementById("haslo").innerText =
            podpowiedziMarki[slowo] ? "üü° " + podpowiedziMarki[slowo] : "‚ùå BRAK HAS≈ÅA";
    } else {
        document.getElementById("haslo").innerText = slowo;
    }
    document.querySelector("button[onclick='dalej()']").style.display = "inline";
}

function dalej() {
    aktualny++;
    if (aktualny >= liczbaGraczy) location.reload();
    else pokazInfo();
}
</script>

</body>
</html>
